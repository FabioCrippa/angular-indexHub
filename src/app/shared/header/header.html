<header class="header">
    <div class="header_logo">
        <img 
            width="50" 
            height="50" 
            src="https://img.icons8.com/isometric/50/overview-pages-4.png" 
            alt="overview-pages-4"/>
        <span>IndexHub</span>
    </div>
    <nav class="header_nav">
        <a routerLink="/" routerLinkActive="active">Home</a>
    
    <div class="nav-item-dropdown">
      <a class="nav-link">Busca</a>
      <div class="dropdown-wrapper">
        <div class="dropdown-menu">
          <div class="dropdown-container">
            <div class="dropdown-split">

              <div class="dropdown-content">
                <ul class="dropdown-list">
                  <li class="dropdown-item" (mouseenter)="showDetail('revistas')">
                    <a>Revistas Científicas</a>
                  </li>
                  <li class="dropdown-item" (mouseenter)="showDetail('artigos')">
                    <a>Artigos</a>
                  </li>
                  <li class="dropdown-item" (mouseenter)="showDetail('autores')">
                    <a>Autores</a>
                  </li>
                </ul>
              </div>
              
              <div class="dropdown-details">
                <div class="dropdown-detail" [class.active]="activeDetail === 'revistas'">
                  <div class="detail-content">
                    <h3>Revistas Científicas</h3>
                    <p>Explore nossa base completa de revistas indexadas com avaliação de impacto científico, métricas de citação e rankings atualizados periodicamente.</p>
                    <a routerLink="/busca/revistas" class="btn-link">Explorar revistas →</a>
                  </div>
                  <div class="detail-image">
                    <img src="https://www.excellenceeduc.com/wp-content/uploads/2021/05/CAPA-EXCELLENCE-ED-MAIO-2021.jpg" alt="Revistas">
                  </div>
                </div>
                
                <div class="dropdown-detail" [class.active]="activeDetail === 'artigos'">
                  <div class="detail-content">
                    <h3>Artigos Científicos</h3>
                    <p>Busque artigos por título, autor, palavra-chave, DOI ou ISSN. Acesse metadados completos e exporte citações em diversos formatos.</p>
                    <a routerLink="/busca/artigos" class="btn-link">Buscar artigos →</a>
                  </div>
                  <div class="detail-image">
                    <img src="https://wordpress-cms-ead-prod-assets.quero.space/uploads/2024/03/Ferramentas-para-ler-um-artigo-cientifico.jpg" alt="Artigos">
                  </div>
                </div>
                
                <div class="dropdown-detail" [class.active]="activeDetail === 'autores'">
                  <div class="detail-content">
                    <h3>Autores e Pesquisadores</h3>
                    <p>Encontre pesquisadores, visualize suas publicações, instituições e redes de colaboração científica.</p>
                    <a routerLink="/busca/autores" class="btn-link">Pesquisar autores →</a>
                  </div>
                  <div class="detail-image">
                    <img src="https://i0.wp.com/www.astropt.org/blog/wp-content/uploads/2023/05/E2eYdAvWEAw2ips.jpg?w=606&ssl=1" alt="Autores">
                  </div>
                </div>
              </div>
              
            </div>
          </div>
        </div>
      </div>
    </div>
        
        <a routerLink="/rankings" routerLinkActive="active">Rankings</a>
        <a routerLink="/editor" routerLinkActive="active">Editor</a>
    </nav>

    <button 
      class="header_hamburger"
      [attr.aria-label]="isMenuOpen ? t('fechar menu') : t('abrir menu')"
      type="button"
      (click)="toggleMenu()"
      aria-label="Menu">
      <span></span>
      <span></span>
      <span></span>
    </button>
    <div class="header_actions">
        <button 
            (click)="toggleLanguage()"
            [attr.aria-label]="translateService.currentLang() === 'pt' ? 'Trocar para inglês' : 'Switch to Portuguese'">
            <span class="lang-badge">{{ translateService.currentLang().toUpperCase() }}</span>
        </button>
        <button 
            (click)="toggleSearch()"
            [attr.aria-label]="isSearchOpen ? 'Fechar busca' : 'Abrir busca'">
            <mat-icon>{{ isSearchOpen ? 'close' : 'search' }}</mat-icon>
        </button>
    </div>
</header>

<!-- Barra de Busca Expansível -->
<div 
  class="search-bar"
  [class.open]="isSearchOpen">
  <div class="search-bar-content">
    <div class="search-input-wrapper">
      <mat-icon class="search-icon">search</mat-icon>
      <input 
        type="text" 
        class="search-input"
        [placeholder]="translateService.currentLang() === 'pt' ? 'Buscar revistas, artigos, autores...' : 'Search journals, articles, authors...'"
        (keyup.enter)="toggleSearch()">
      <button 
        class="search-submit"
        [attr.aria-label]="translateService.currentLang() === 'pt' ? 'Buscar' : 'Search'">
        {{ translateService.currentLang() === 'pt' ? 'Buscar' : 'Search' }}
      </button>
    </div>
  </div>
</div>

<div 
  class="off-canvas-overlay"
  *ngIf="isMenuOpen"
  (click)="toggleMenu()">

  <div 
    class="off-canvas-menu"
    (click)="$event.stopPropagation()">

    <button 
      class="off-canvas-close"
      (click)="toggleMenu()"
      [attr.aria-label]="t('fechar')">
      <span>&times;</span>
    </button>

    <nav 
      class="off-canvas-nav">
      <a routerLink="/" (click)="toggleMenu()">{{ t('home') }}</a>
      
      <button 
        class="nav-item-link"
        (click)="openBuscaMenu()"
        type="button">
        {{ t('busca') }}
      </button>

      <a routerLink="/rankings" (click)="toggleMenu()">{{ t('rankings') }}</a>
      <a routerLink="/editor" (click)="toggleMenu()">{{ t('editor') }}</a>
    </nav>

    <div 
      class="busca-submenu-overlay"
      *ngIf="isBuscaMenuOpen"
      (click)="closeBuscaMenu()">
      
      <div 
        class="busca-submenu"
        (click)="$event.stopPropagation()">
        
        <button 
          class="busca-submenu-back"
          (click)="closeBuscaMenu()"
          [attr.aria-label]="t('voltar')">
          <mat-icon>arrow_back</mat-icon>
          <span>{{ t('voltar') }}</span>
        </button>

        <nav class="busca-submenu-nav">
          <a routerLink="/busca/revistas" (click)="closeBuscaMenu(); toggleMenu()">
            <mat-icon>menu_book</mat-icon>
            <span>{{ t('revistas') }}</span>
          </a>
          <a routerLink="/busca/artigos" (click)="closeBuscaMenu(); toggleMenu()">
            <mat-icon>description</mat-icon>
            <span>{{ t('artigos') }}</span>
          </a>
          <a routerLink="/busca/autores" (click)="closeBuscaMenu(); toggleMenu()">
            <mat-icon>people</mat-icon>
            <span>{{ t('autores') }}</span>
          </a>
        </nav>

      </div>
    </div>

  </div>
</div>
